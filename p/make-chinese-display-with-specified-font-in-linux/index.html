<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Linux使用指定字体显示汉字 | wuhulamb’s week000</title>
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="Linux使用指定字体显示汉字" />
<meta name="author" content="wuhulamb" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="正文" />
<meta property="og:description" content="正文" />
<meta property="og:site_name" content="wuhulamb’s week000" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-01-31T22:19:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Linux使用指定字体显示汉字" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"wuhulamb"},"dateModified":"2025-01-31T22:19:00+08:00","datePublished":"2025-01-31T22:19:00+08:00","description":"正文","headline":"Linux使用指定字体显示汉字","mainEntityOfPage":{"@type":"WebPage","@id":"/week000/p/make-chinese-display-with-specified-font-in-linux/"},"url":"/week000/p/make-chinese-display-with-specified-font-in-linux/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/week000/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="/week000/feed.xml" title="wuhulamb&apos;s week000" />
<link rel="icon" type="image/png" href="/week000/media/favicon/favicon-48x48.png" sizes="48x48" />
<link rel="icon" type="image/svg+xml" href="/week000/media/favicon/favicon.svg" />
<link rel="shortcut icon" href="/week000/media/favicon/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/week000/media/favicon/apple-touch-icon.png" />
<link rel="manifest" href="/week000/media/favicon/site.webmanifest" />

<link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.6.0/css/all.min.css" rel="stylesheet">
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/week000/">wuhulamb&#39;s week000</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/week000/week000/">Week000</a><a class="page-link" href="/week000/category/">Category</a><a class="page-link" href="/week000/links/">Links</a><a class="page-link" href="/week000/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Linux使用指定字体显示汉字</h1>
    <p class="post-meta"><time class="dt-published" datetime="2025-01-31T22:19:00+08:00" itemprop="datePublished">
        2025-01-31
      </time>
				| <span><a href="/week000/category/computer/">计算机</a></span>
				
				-> <span><a href="/week000/category/computer/ubuntu/">Ubuntu折腾小记</a></span>
			  </p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h2 id="正文">正文</h2>

<p>今天在知乎上刷到<a href="https://www.zhihu.com/question/32058777/answer/3561707776" target="_blank">一篇介绍字体的文章</a>，于是忍不住想解决一下Ubuntu系统中文字体显示异样的问题。</p>

<figure>
<img src="https://image.baidu.com/search/down?url=https://wx1.sinaimg.cn/large/008kbRJbgy1hy7f3qfc14j30th0gstbc.jpg" alt="chinese-display-with-default-font.jpg" />
<figcaption>系统默认字体显示中文有异样</figcaption>
</figure>

<p><code class="language-plaintext highlighter-rouge">/etc/fonts/fonts.conf</code> 配置文件中可以找到 <code class="language-plaintext highlighter-rouge">mono</code> , <code class="language-plaintext highlighter-rouge">sans</code> , <code class="language-plaintext highlighter-rouge">system-ui</code> 情境，结合 <code class="language-plaintext highlighter-rouge">fc-match</code> 命令可以查看对应情境使用的默认字体</p>

<figure>
<img src="https://image.baidu.com/search/down?url=https://wx4.sinaimg.cn/large/008kbRJbgy1hy7f3qf4xyj30r704pgn2.jpg" alt="ubuntu-default-sans.jpg" />
<figcaption>Ubuntu系统默认使用Noto Sans Regular作为非衬线字体</figcaption>
</figure>

<p>直接替换Noto Sans Regular会破坏原生应用的布局显示，而我只是想在显示中文的时候使用自己定义的字体（Microsoft YaHei，Windows用的还是太多了），所以最后解决办法是创建 <code class="language-plaintext highlighter-rouge">~/.config/fontconfig/fonts.conf</code> 文件。下面是文件内容：</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;
&lt;fontconfig&gt;
    &lt;!-- 设置微软雅黑为回退字体 --&gt;
    &lt;match&gt;
        &lt;test name="family"&gt;
            &lt;string&gt;sans-serif&lt;/string&gt;
        &lt;/test&gt;
        &lt;edit name="family" mode="append" binding="strong"&gt;
            &lt;string&gt;Microsoft YaHei&lt;/string&gt;
        &lt;/edit&gt;
    &lt;/match&gt;
&lt;/fontconfig&gt;
</code></pre></div></div>

<h2 id="彩蛋">彩蛋</h2>

<p><code class="language-plaintext highlighter-rouge">gsettings</code> 是GNOME的配置程序，使用它可以<del>方便</del>地配置和GNOME相关的所有东西，当然也可以配置字体：</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gsettings get org.gnome.desktop.interface font-name    # 查看桌面字体
gsettings set org.gnome.desktop.interface font-name 'Microsoft YaHei 11'  # 设置桌面字体为微软雅黑 11号字体
gsettings reset org.gnome.desktop.interface font-name  # 重置回原来的字体
</code></pre></div></div>

<p>更多用法参见 <code class="language-plaintext highlighter-rouge">man gsettings</code></p>

<p>然而其实 <code class="language-plaintext highlighter-rouge">gsettings</code> 配置的字体只是GNOME程序的界面，相较之下上文使用fontconfig配置文件的方法更加彻底，所有使用fontconfig的程序都会遵守该配置文件</p>

  </div><a class="u-url" href="/week000/p/make-chinese-display-with-specified-font-in-linux/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/week000/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
				<p>Copyright &copy; 2024 wuhulamb</p>
				<p>Powered by <a href="https://jekyllrb.com" target="_blank" rel="nofollow">Jekyll</a> | Theme is <a href="https://github.com/jekyll/minima/" target="_blank" rel="nofollow">Minima</a></p>
      </div>
      <div class="footer-col">
        <p></p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"></ul>
</div>

  </div>

</footer>
</body>

</html>
